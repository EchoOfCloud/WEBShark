# WebShark

WebShark 是一款基于 Web 的网络流量分析工具，类似于 Wireshark，但运行在浏览器中。它可以打开 PCAP 和 PCAPNG 格式的流量包文件，提供丰富的流量分析功能。

## 主要功能

- 支持 PCAP 和 PCAPNG 格式的流量包文件
- 提供直观的流量概览统计
- 支持数据包的搜索、筛选和排序
- 网络流分析与对话展示
- 应用层请求详情分析
- IP 端口使用统计
- 连接频率统计
- 关键字匹配功能
- 安全检测功能
- 表格列宽拖拽调整
- IP 归属地查询
- 端口描述查询
- 数据导出功能（Excel 格式）
- URL 解码功能
- 时间格式化功能
- 多种协议支持（HTTP、TCP、UDP、DNS、TLS 等）


## 阿里云ESA支持 

本项目由阿里云ESA提供加速、计算和保护 

! `https://img.alicdn.com/imgextra/i3/O1CN01H1UU3i1Cti9lYtFrs_!!6000000000139-2-tps-7534-844.png` 


## 在线访问 

项目在线地址： https://webshark.bbd0e568.er.aliyun-esa.net

## 快速开始

### 启动应用

WebShark 是一个静态 Web 应用，可以通过以下方式启动：

1. **本地 HTTP 服务器**（推荐）：
   ```bash
   # 进入代码目录
   cd 代码
   # 使用 Python 启动 HTTP 服务器
   python -m http.server 8000
   ```
   然后在浏览器中访问 `http://localhost:8000`

2. **直接打开 HTML 文件**：
   直接双击 `代码/index.html` 文件在浏览器中打开

### 加载流量包

1. 点击页面顶部的 "选择 PCAP/PCAPNG 文件" 按钮
2. 在文件选择对话框中选择要分析的流量包文件
3. 等待文件加载和分析完成
4. 查看各个标签页的分析结果

## 功能模块

### 概览
显示流量包的基本统计信息，包括数据包数量、文件大小、捕获时长、平均包大小、总流量等，以及协议使用统计。

### 数据包列表
显示所有数据包的详细信息，并提供搜索、筛选、排序和列宽调整等功能。支持将数据包列表导出为 Excel 文件。

### 流列表
显示网络流的信息，包括流列表和流对话，帮助用户分析网络连接的完整通信过程。

### 应用层请求
显示 HTTP 等应用层协议的请求信息，帮助用户分析应用层通信细节。包含安全检测功能，可识别潜在威胁。

### 数据包详情
显示单个数据包的详细信息，包括各协议层的解析结果和十六进制数据。

### IP 端口统计
显示 IP 地址和端口的使用情况统计，帮助用户了解网络流量的来源和去向。

### 连接频率统计
显示 IP+端口组合的连接频率统计，帮助用户识别频繁连接的主机和服务。

### 设置
用于配置 WebShark 的各项功能，包括关键字管理、功能开关等。

## 项目结构

```
WebShark/
├── 代码/                     # 主程序代码
│   ├── app.js                # 主应用逻辑
│   ├── chart.min.js          # 图表库
│   ├── index.html            # 主页面
│   ├── package.json          # 项目配置
│   ├── package-lock.json     # 依赖锁定文件
│   ├── pcapng-parser.js      # PCAPNG解析器
│   ├── security-detector.js  # 安全检测模块
│   └── xlsx.full.min.js      # Excel导出库
├── 流量包/                   # 示例流量包文件
└── README.md                 # 项目说明文档
```

## 技术栈

WebShark 采用纯前端技术栈开发，无需后端服务，可直接在浏览器中运行。

| 技术 | 用途 |
|------|------|
| HTML5 | 页面结构和布局 |
| CSS3 | 页面样式和交互效果 |
| JavaScript (ES6+) | 核心逻辑和交互处理 |
| PCAPNG 解析库 | 解析 PCAP 和 PCAPNG 格式的流量包 |
| Excel 导出库 | 将数据导出为 Excel 文件 |

## 浏览器兼容性

- Chrome 80+：最佳支持
- Firefox 75+：良好支持
- Safari 13+：基本支持
- Edge 80+：良好支持

## 使用技巧

1. **快速定位数据包**：使用关键字匹配、搜索功能或筛选功能快速查找特定数据包
2. **分析网络流**：查看流列表和流对话，了解网络连接情况
3. **识别安全威胁**：关注应用层请求中标记为 "危险" 的请求
4. **优化大文件处理**：对于大型流量包，建议关闭关键字匹配功能，调整每页显示数量
5. **导出数据**：使用导出功能将分析结果保存为 Excel 文件，用于进一步分析

## 常见问题

### 支持哪些文件格式？
- PCAP 格式
- PCAPNG 格式

### 为什么文件加载失败？
- 文件格式错误：请确保文件格式为 PCAP 或 PCAPNG
- 文件损坏：请确保文件没有损坏
- 文件过大：对于大型文件，可能需要较长时间加载
- 浏览器兼容性：请使用支持的浏览器版本

### 如何提高大型文件的加载速度？
- 关闭不必要的功能（如关键字匹配）
- 优化浏览器性能：关闭其他标签页和扩展程序
- 使用较新版本的浏览器

### 如何保存分析结果？
- 导出为 Excel：使用页面上的 "导出 XLSX" 按钮
- 截图保存：使用浏览器的截图功能
- 复制数据：直接从表格中复制数据到其他应用程序




## 许可证

MIT License
